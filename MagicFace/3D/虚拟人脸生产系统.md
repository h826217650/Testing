# 变脸背景介绍
 2016年3月10日，Facebook公司花费1.17亿美元收购了广受欢迎的“换脸”应用MSQRD的开发商Masquerade Technologies公司。 
  
 * Masquerade Technologies成立于2015年，由该公司开发的“换脸”应用MSQRD包含有人像、鬼脸、动物等头像，  
 * 用户可将这些图片覆盖到自己脸上然后进行相片、视频的拍摄。
 
 * 基于人脸识别图像序列的三维动态虚拟人脸生成系统（VF-MORPH）就是一套在功能和性能上类似MSQRD的虚拟人脸生成系统。
 * 该系统可根据图像序列中人脸的实际位置和朝向实时计算虚拟人脸模型的位置和朝向，使之与图像中的人脸匹配；
 * 根据图像序列中人脸表情的变化实时计算虚拟柔性人脸模型的弹性形变，使之与图像中的人脸表情匹配；
 * 对虚拟人脸模型进行真实感或卡通化渲染（包括纹理映射、凹凸映射、毛发、附加光源等效果）；
 * 实现了虚拟人脸渲染结果与图像的高质量融合；可以在iOS及Android平台中高端手机上流畅运行。

 
# VF-MORPH 变脸处理过程
 分为四个步骤：定位，变形，渲染，合成。  
 
 * **定位阶段**  
 根据输入的人脸检测特征点在摄像头图像上的坐标以及预设的平均人脸模型上对应标记点位置对人脸头部姿态进行计算，获取头部的位置和朝向
 * **变形阶段**  
  根据输入的人脸检测特征点在摄像头图像上的坐标对虚拟人脸网格模型进行调整，使网格模型的变化符合人脸表情的变化； 
 * **渲染阶段** 
 根据头部姿态对三维装饰模型进行渲染，使其跟随头部的实际位置和朝向，同时使用变形后的脸部网格对虚拟人脸进行渲染，使虚拟人脸贴合实际人脸；
 * **合成阶段**  
 通过正确处理三维装饰和人脸头部的遮挡关系将三维装饰合成到二维摄像头图像所摄场景中，同时将虚拟人脸与实际人脸图像进行增强后的混合，使一些脸部细节也能够反映在最终的渲染结果上。
 